---
import { SITE, HOME } from "@consts";
import Layout from "@layouts/Layout.astro";
import Container from "@components/Container.astro";
import PetalCarousel from "@components/PetalCarousel.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("petals"))
  .filter((p) => !p.data.draft)
  .sort(
    (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf(),
  );
---

<Layout title={HOME.TITLE} description={HOME.DESCRIPTION}>
  <head>
    <meta name="pagefind:filter" content="nav" />
  </head>

  <Container>
    <!-- Root centers content, then lifts it above Qi -->
    <div
      class="root flex min-h-[60vh] flex-col items-center justify-center text-center"
    >
      <section
        class="w-full max-w-2xl
          -translate-y-20
          sm:-translate-y-24
          md:-translate-y-28"
      >
        <article class="seed space-y-6">
          <!-- DESCRIPTION / DEFINITION -->
          <span class="animate block text-base sm:text-lg">
            <span class="block" style="color: var(--ui-muted);">
              {SITE.DESCRIPTION}
            </span>
            <br />
            <span class="block" style="color: var(--ui-muted);">
              {SITE.DEFINITION}
            </span>
          </span>
        </article>
      </section>
      <PetalCarousel posts={posts} />
    </div>
  </Container>
</Layout>
