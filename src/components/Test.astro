---
/*
  Glass Orb
  Firefox-safe refraction + brighter white
*/
---

<style>
  .orb-wrap {
    width: 260px;
    height: 260px;
    position: relative;
    pointer-events: none;
  }

  .glass {
    z-index: -1;
    position: absolute;
    inset: 0;
    backdrop-filter: blur(22px) saturate(160%);
    -webkit-backdrop-filter: blur(22px) saturate(160%);
    clip-path: circle(35% at 50% 50%);
  }

  svg {
    width: 100%;
    height: 100%;
    display: block;
  }

  .orb {
    filter: url(#orbFX);
  }
</style>

<div class="orb-wrap">
  <div class="glass"></div>

  <svg
    viewBox="0 0 200 200"
    xmlns="http://www.w3.org/2000/svg"
    aria-hidden="true"
  >
    <defs>
      <!-- internal distortion + light -->
      <filter id="orbFX" x="-50%" y="-50%" width="200%" height="200%">
        <feTurbulence
          type="turbulence"
          baseFrequency="0.014"
          numOctaves="2"
          seed="4"
          result="noise"
        >
          <animate
            attributeName="baseFrequency"
            dur="7s"
            values="0.014;0.028;0.014"
            repeatCount="indefinite"></animate>
        </feTurbulence>

        <feDisplacementMap
          in="SourceGraphic"
          in2="noise"
          scale="26"
          result="distorted"></feDisplacementMap>

        <!-- internal light -->
        <feSpecularLighting
          in="distorted"
          surfaceScale="1"
          specularConstant="0.45"
          specularExponent="22"
          lighting-color="white"
          result="light"
        >
          <fePointLight x="100" y="100" z="140" id="cursorLight"></fePointLight>
        </feSpecularLighting>

        <feGaussianBlur in="light" stdDeviation="6" result="softLight"
        ></feGaussianBlur>

        <feComposite
          in="softLight"
          in2="distorted"
          operator="in"
          result="innerLight"></feComposite>

        <feBlend in="distorted" in2="innerLight" mode="screen"></feBlend>
      </filter>

      <!-- BRIGHT white glass body -->
      <radialGradient id="orbGradient">
        <stop offset="0%" stop-color="white" stop-opacity="0.25">
          <animate
            attributeName="stop-opacity"
            dur="8s"
            values="0.22;0.3;0.22"
            repeatCount="indefinite"></animate>
        </stop>

        <stop offset="55%" stop-color="white" stop-opacity="0.45"></stop>

        <stop offset="100%" stop-color="white" stop-opacity="0.7"></stop>
      </radialGradient>
    </defs>

    <circle cx="100" cy="100" r="70" fill="url(#orbGradient)" class="orb"
    ></circle>
  </svg>
</div>

<script>
  const light = document.getElementById("cursorLight");

  window.addEventListener("mousemove", (e) => {
    const cx = 100;
    const cy = 100;

    const dx = (e.clientX / window.innerWidth - 0.5) * 40;
    const dy = (e.clientY / window.innerHeight - 0.5) * 40;

    light.setAttribute("x", cx + dx);
    light.setAttribute("y", cy + dy);
  });
</script>
