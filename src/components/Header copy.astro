---
import Ase from "@components/Ase.astro";
import SysInfo from "@components/SysInfo.astro";
import Container from "@components/Container.astro";

interface PostLink {
  slug: string;
  title: string;
}

interface Props {
  title: string;
  description: string;
  prevPost?: PostLink;
  nextPost?: PostLink;
}

const { title, description, prevPost, nextPost } = Astro.props;
---

<header transition:persist class="py-4" data-role="app-header">
  <Container>
    <div class="flex h-full items-center justify-between">
      <!-- SEARCH PILL (toggles PageFind) -->
      <!-- <Ase /> -->
      <Ase mode="post" prevPost={prevPost} nextPost={nextPost} />

      <nav class="flex items-center gap-1 text-sm">
        <SysInfo />
      </nav>
    </div>
  </Container>

  <style is:global>
    /* Header reacts to search proximity (set by PageFind spring) */
    header[data-role="app-header"] {
      transform: translateY(calc(-1px * var(--search-lift, 0)));
      transition: transform 90ms linear;
    }

    header[data-role="app-header"] a[data-role="search-pill"] {
      box-shadow: 0 0 calc(10px * var(--search-proximity, 0))
        rgba(255, 255, 255, 0.18);
      transition: box-shadow 90ms linear;
    }
  </style>
</header>
