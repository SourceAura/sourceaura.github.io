---
import { SITE } from "@consts"
import Qi from "@/components/Qi.astro"
import Head from "@components/Head.astro"
import Quasar from "@components/Quasar.astro"
import Header from "@components/Header.astro"
import Footer from "@components/Footer.astro"
import PageFind from "@components/PageFind.astro"

// ðŸ‘‡ optional navigation props
const { title, description, prev, next } = Astro.props
---

<!doctype html>
<html lang="en">
  <head>
    <Head title={`${title} | ${SITE.TITLE}`} description={description} />
  </head>

  <body data-route={Astro.props["data-route"]}>

    <Quasar />
    <Qi />
    <Header />

    <main>
        <!-- Euthymia -->
      <slot />
      <!--  -->
    </main>

    <Footer />
    <PageFind />

    {prev || next ? (
      <script
        define:vars={{ prev, next }}
        type="module"
      >
        import { attachPostNavigation } from "/src/utils/postNavigator"

        attachPostNavigation({ prev, next })
      </script>
    ) : null}
  </body>
</html>

<script is:inline>
  // Compatibility shim for persisted client scripts
  if (typeof window !== "undefined" && !("locales" in window)) {
    window.locales = undefined;
  }
</script>
