{"version":3,"file":"petals.astro.mjs","sources":["../../../../src/components/PetalCard.astro","../../../../src/pages/petals/index.astro"],"sourcesContent":["---\nimport { Image } from 'astro:assets';\nimport type { CollectionEntry } from 'astro:content';\nimport FormattedDate from \"./FormattedDate.astro\";\nimport { readingTime } from \"@lib/utils\";\n\ninterface Props {\n  post: CollectionEntry<'petals'>;\n}\n\nconst { post } = Astro.props;\nconst { title, description, date } = post.data;\n\n// Find the first image in the markdown content\nlet imageSrc: string | null = null;\nconst imageRegex = /!\\[.*?\\]\\((.*?)\\)/;\nconst match = post.body.match(imageRegex);\nif (match && match[1]) {\n  imageSrc = match[1].startsWith('http') ? match[1] : `/src/assets/${match[1]}`;\n}\n\n---\n\n<div class=\"petal-card group relative overflow-hidden rounded-lg shadow-lg transition-all duration-300 h-full\" data-petal-card>\n  <a href={`/petals/${post.slug}/`} class=\"block w-full h-full\">\n    <div class=\"absolute inset-0 w-full h-full bg-transparent\">\n      {imageSrc ? (\n        <Image\n          src={imageSrc}\n          alt={`Image for ${title}`}\n          width={300}\n          height={200}\n          class=\"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110 group-active:scale-110\"\n        />\n      ) : (\n        <div class=\"w-full h-full bg-transparent\"></div>\n      )}\n    </div>\n    <div class=\"relative p-1 bg-black bg-opacity-50 text-white h-full flex flex-col justify-between transition-opacity duration-300 group-hover:bg-opacity-70 group-active:bg-opacity-70\">\n      <div>\n        <h2 class=\"text-xs font-bold mb-0.5 line-clamp-1\">{title}</h2>\n        <p class=\"text-xs mb-1 line-clamp-2\">{description}</p>\n      </div>\n      <div class=\"text-xs opacity-0 group-hover:opacity-100 group-active:opacity-100 transition-opacity duration-300\">\n        <FormattedDate date={new Date(date)} />\n        <span class=\"mx-0.5\">•</span>\n        <span>{readingTime(post.body)}</span>\n      </div>\n    </div>\n  </a>\n</div>\n\n<style>\n  .petal-card {\n    transition: transform 0.3s ease, box-shadow 0.3s ease;\n    touch-action: none; /* Prevent scrolling on touch devices while dragging */\n    user-select: none; /* Prevent text selection during drag */\n  }\n\n  .petal-card:hover, .petal-card:active {\n    transform: scale(1.05);\n    box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);\n    z-index: 10;\n  }\n</style>","---\nimport type { CollectionEntry } from \"astro:content\";\nimport Layout from \"@layouts/Layout.astro\";\nimport Container from \"@components/Container.astro\";\nimport PetalCard from \"@components/PetalCard.astro\";\nimport { getCollection } from \"astro:content\";\nimport { getRandomSize } from \"@lib/utils\";\n\nconst posts: CollectionEntry<\"petals\">[] = (await getCollection(\"petals\"))\n  .filter((post) => !post.data.draft)\n  .sort(\n    (a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf(),\n  );\n---\n\n<Layout\n  title=\"Petals Gallery\"\n  description=\"A collection of my projects and experiments\"\n>\n  <Container>\n    <!-- ✅ PAGEFIND FIX: searchable container -->\n    <div class=\"petal-container\" data-pagefind-body>\n      <div class=\"petal-grid\">\n        {\n          posts.map((post) => (\n            <div class={`petal-item ${getRandomSize()}`}>\n              <PetalCard post={post} />\n            </div>\n          ))\n        }\n      </div>\n    </div>\n  </Container>\n</Layout>\n\n<style>\n  .petal-container {\n    width: 340px;\n    height: 210px;\n    overflow: auto;\n    padding: 0.25rem;\n    -webkit-overflow-scrolling: touch;\n    scrollbar-width: none;\n    -ms-overflow-style: none;\n    border: 1px solid #ccc;\n    border-radius: 8px;\n  }\n\n  .petal-container::-webkit-scrollbar {\n    display: none;\n  }\n\n  .petal-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));\n    grid-auto-flow: dense;\n    grid-gap: 0.25rem;\n    width: max-content;\n    padding: 1rem;\n  }\n\n  .petal-item {\n    break-inside: avoid;\n  }\n\n  .small {\n    grid-column: span 1;\n    grid-row: span 1;\n  }\n\n  .medium {\n    grid-column: span 2;\n    grid-row: span 2;\n  }\n\n  .large {\n    grid-column: span 3;\n    grid-row: span 3;\n  }\n</style>\n"],"names":["$$createAstro","$$createComponent","Astro","$$render","$$maybeRenderHead","$$addAttribute","$$renderComponent","Image","FormattedDate","Layout","$$result","Container","PetalCard"],"mappings":"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"}